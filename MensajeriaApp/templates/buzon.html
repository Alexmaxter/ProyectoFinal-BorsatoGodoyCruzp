{% extends 'base.html' %}
{% load static %}
{% block titulo %}
<title>Buzón ({{cantidad_mensajes}}) - BlogCoder</title>
{% endblock titulo %}


{% block contenido %}

<div class="container mt " style="margin: 4rem auto;" >
    
    <div class="row d-flex justify-content-center">
            
            <div class="contenedorFormulario">

{% if lista_mensajes.count == 0 %}

<div style=" text-align: center;padding:2rem;">
                        
  <img src="{% static 'LibreriaCoderApp/assets/img/PaginaVacia.png' %}" alt="" style="width: 20%;filter: grayscale(100%)">
  <h2 class="TituloPost">¡Ups! No hay nada por aquí...</h2>
  </div>

{% else %}
<div style="margin:0rem 0rem 1rem 0;">
<span class="TituloPost">Buzón</span></div>
<table class="table table-inbox table-hover">

    <tbody>
        {% for mensaje in lista_mensajes %}
        <tr class="unread">
            
            <td class="inbox-small-cells" style="width:5rem; {% if mensaje.leido == False %}border-left:2px; border-style:solid{% endif %};">
            {% if mensaje.remitente.is_superuser %}
            <div class="be-img-comment" style="margin-bottom: 0px;">
          <a href='{% url "perfil_usuario" mensaje.remitente.id %}'>
            {% if mensaje.remitente.masdatosusuarios.avatar %}
              <img src="{{ mensaje.remitente.masdatosusuarios.avatar.url}}" alt="" class="be-ava-mensaje" style="object-fit: cover;border-style: solid;border-width: 3px; border-radius: 50%;border-color: #198754;width:60px; height:60px"/>
              {% else %}
              <img src="{% static 'LibreriaCoderApp/assets/img/AvatarPorDefecto.png' %}" alt="" class="be-ava-mensaje" style="object-fit: cover;border-style: solid;border-width: 3px; border-radius: 50%;border-color: #198754;width:60px; height:60px"/>
              {% endif %}
            </a>
        </div>
      {% else %}
        <div class="be-img-comment" style="margin-bottom: 0px;">
          <a href='{% url "perfil_usuario" mensaje.remitente.id %}'>
            {% if mensaje.remitente.masdatosusuarios.avatar %}
              <img src="{{ mensaje.remitente.masdatosusuarios.avatar.url }}" alt=""class="be-ava-mensaje"style="object-fit: cover; border-radius: 50%;width:60px; height:60px"/>
            {% else %}
              <img src="{% static '/LibreriaCoderApp/assets/img/AvatarPorDefecto.png' %}" alt=""class="be-ava-mensaje"style="object-fit: cover;border-radius: 50%;width:60px; height:60px"/>
            {% endif %}
          </a>
        </div>
      {% endif %}
    </td>
    <td class="inbox-small-cells"><i class="fa fa-star"></i></td>
    
    <td class="view-message" valign="middle"><span {% if mensaje.leido == False %} style="font-weight: bold;"{% endif %}>{{mensaje.remitente}}</span></td>
    <td class="view-message" valign="middle"><span {% if mensaje.leido == False %} style="font-weight: bold;"{% endif %}>{{mensaje.contenido|safe|truncatechars_html:60}}</span></td>
    <td class="view-message  inbox-small-cells"><i class="fa fa-paperclip"></i></td>
    <td class="view-message  text-right" valign="middle"><span {% if mensaje.leido == False %} style="font-weight: bold;"{% endif %}>{{mensaje.creado}}</span></td>
    <td valign="middle"  style="width:5rem; {% if mensaje.leido == False %}border-right:2px; border-style:solid{% endif %};"><a class="btn btn-success px-4 ms-3" href='{% url "ver_mensaje" mensaje.id %}' style="margin: 0rem 1rem 0rem 1rem;">Leer</a></td>
    
      </tr>
      {% endfor %}
  </tbody>
  </table>
{% endif %}
</div>
</div>
</div>


{% endblock contenido %}